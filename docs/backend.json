{
  "entities": {
    "User": {
      "title": "User",
      "description": "A user of the application.",
      "type": "object",
      "properties": {
        "email": {
          "type": "string",
          "format": "email"
        },
        "displayName": {
          "type": "string"
        },
        "headline": {
          "type": "string"
        },
        "bio": {
          "type": "string"
        },
        "profileSlug": {
          "type": "string"
        },
        "profileComplete": {
          "type": "boolean"
        },
        "avatarUrl": {
          "type": "string",
          "format": "uri"
        },
        "galleryUrls": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uri"
          },
          "description": "A small, personal photo gallery (max 6 images)."
        },
        "roles": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "guide",
              "host",
              "vendor",
              "seeker"
            ]
          }
        },
        "primaryRole": {
          "type": "string",
          "enum": [
            "guide",
            "host",
            "vendor",
            "seeker"
          ]
        },
        "locationLabel": {
          "type": "string"
        },
        "locationLat": {
          "type": "number"
        },
        "locationLng": {
          "type": "number"
        },
        "isWillingToTravel": {
          "type": "boolean"
        },
        "travelRadiusMiles": {
          "type": "number"
        },
        "countries_served": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "vendorCategories": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Categories for vendor services."
        },
        "vendorWebsite": {
          "type": "string",
          "format": "uri"
        },
        "instagramUrl": {
          "type": "string",
          "format": "uri",
          "description": "Link to vendor's Instagram profile."
        },
        "offerings": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Short list of specific services or offerings for a vendor."
        },
        "portfolioUrls": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uri"
          },
          "description": "Image gallery for a vendor's portfolio (max 8 images)."
        },
        "serviceRadiusMiles": {
          "type": "number",
          "description": "Specific service radius for a vendor."
        },
        "hostVibe": {
          "type": "string",
          "description": "The general vibe or aesthetic of a host's space."
        },
        "hostAmenities": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "propertyShowcaseUrls": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uri"
          },
          "description": "Image gallery for a host's property showcase (max 10 images)."
        },
        "typicalCapacity": {
          "type": "number",
          "description": "Typical guest capacity for a host's property."
        },
        "guideRetreatTypes": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "savedRetreatIds": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "List of retreat IDs the user has saved."
        },
        "accepts_manifestations": {
          "type": "boolean"
        },
        "manifestation_notification_frequency": {
          "type": "string",
          "enum": [
            "immediate",
            "daily_digest"
          ]
        },
        "max_manifestations_per_week": {
          "type": "number"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        },
        "lastLoginAt": {
          "type": "string",
          "format": "date-time"
        },
        "subscriptions": {
          "type": "object",
          "description": "User's subscription status for different roles.",
          "properties": {
            "guide": {
              "$ref": "#/entities/Subscription"
            },
            "host": {
              "$ref": "#/entities/Subscription"
            },
            "vendor": {
              "$ref": "#/entities/Subscription"
            }
          }
        }
      },
      "required": [
        "email",
        "createdAt",
        "roles",
        "profileComplete"
      ]
    },
    "Subscription": {
      "title": "Subscription",
      "description": "Details of a user's subscription plan for a specific role.",
      "type": "object",
      "properties": {
        "tier": {
          "type": "string",
          "description": "The plan identifier (e.g., 'starter', 'pro')."
        },
        "subscriptionStatus": {
          "type": "string",
          "enum": [
            "active",
            "trialing",
            "past_due",
            "canceled"
          ],
          "description": "The status of the subscription."
        },
        "stripeSubscriptionId": {
          "type": "string",
          "description": "The ID of the subscription in Stripe."
        },
        "currentPeriodEnd": {
          "type": "string",
          "format": "date-time",
          "description": "The end of the current billing cycle."
        },
        "proCommitmentStart": {
          "type": "string",
          "format": "date-time",
          "description": "The start date of a Pro plan commitment."
        },
        "proCommitmentEnd": {
          "type": "string",
          "format": "date-time",
          "description": "The end date of a Pro plan commitment."
        },
        "lastProDowngradeEffectiveDate": {
          "type": "string",
          "format": "date-time",
          "description": "The date a Pro downgrade became effective."
        },
        "downgradeToTier": {
          "type": "string",
          "description": "The plan to downgrade to at the end of the billing cycle."
        }
      },
      "required": [
        "tier",
        "subscriptionStatus"
      ]
    },
    "Booking": {
      "title": "Booking",
      "description": "A confirmed and paid booking for a retreat or service.",
      "type": "object",
      "properties": {
        "seekerId": {
          "type": "string"
        },
        "retreatId": {
          "type": "string"
        },
        "manifestationId": {
          "type": "string"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        },
        "totalAmount": {
          "type": "number"
        },
        "currency": {
          "type": "string"
        },
        "lineItems": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "providerId": {
                "type": "string"
              },
              "providerRole": {
                "type": "string",
                "enum": [
                  "guide",
                  "host",
                  "vendor"
                ]
              },
              "description": {
                "type": "string"
              },
              "amount": {
                "type": "number"
              },
              "platformFeePctApplied": {
                "type": "number"
              },
              "platformFeeAmount": {
                "type": "number",
                "description": "The calculated platform fee amount for this line item."
              }
            },
            "required": [
              "providerId",
              "amount",
              "platformFeePctApplied",
              "platformFeeAmount"
            ]
          }
        }
      },
      "required": [
        "seekerId",
        "createdAt",
        "totalAmount",
        "lineItems"
      ]
    },
    "WaitlistSeeker": {
      "title": "Waitlist Seeker",
      "description": "A user who has signed up for the waitlist.",
      "type": "object",
      "properties": {
        "email": {
          "type": "string",
          "format": "email",
          "description": "The user's email address."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the user signed up."
        },
        "sourcePage": {
          "type": "string",
          "description": "The page from which the user signed up."
        },
        "filtersSnapshot": {
          "type": "object",
          "properties": {
            "experienceType": {
              "type": "string"
            },
            "destination": {
              "type": "string"
            },
            "regionCountry": {
              "type": "string"
            },
            "investmentRange": {
              "type": "string"
            },
            "timing": {
              "type": "string"
            }
          },
          "description": "A snapshot of the user's filter selections."
        },
        "status": {
          "type": "string",
          "enum": [
            "active",
            "unsubscribed"
          ]
        }
      },
      "required": [
        "email",
        "createdAt",
        "status"
      ]
    },
    "WaitlistSubmission": {
      "title": "Waitlist Submission",
      "description": "A submission to the general waitlist.",
      "type": "object",
      "properties": {
        "email": {
          "type": "string",
          "format": "email"
        },
        "firstName": {
          "type": "string"
        },
        "roleInterest": {
          "type": "string",
          "enum": [
            "Seeker (I want to find/book retreats)",
            "Guide (I want to host retreats)",
            "Host (I have a space)",
            "Vendor (I offer services)",
            "Partner / Collaborator"
          ]
        },
        "source": {
          "type": "string"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "enum": [
            "new"
          ]
        },
        "submitCount": {
          "type": "number"
        },
        "userAgent": {
          "type": "string"
        },
        "founderCode": {
          "type": "string"
        },
        "founderCodeStatus": {
          "type": "string",
          "enum": [
            "assigned"
          ]
        },
        "roleBucket": {
          "type": "string",
          "enum": [
            "seeker",
            "guide",
            "host",
            "vendor",
            "partner"
          ]
        },
        "emailStatus": {
          "type": "string",
          "enum": [
            "sent",
            "failed"
          ]
        },
        "emailSentAt": {
          "type": "string",
          "format": "date-time"
        },
        "lastEmailError": {
          "type": "string"
        },
        "founderCodeAssignedAt": {
          "type": "string",
          "format": "date-time"
        },
        "founderCodeRoleBucket": {
          "type": "string",
          "enum": [
            "guide",
            "host",
            "vendor"
          ]
        },
        "founderCodeTest": {
          "type": "boolean"
        }
      },
      "required": [
        "email",
        "createdAt",
        "status",
        "source"
      ]
    },
    "ContactSubmission": {
      "title": "Contact Submission",
      "description": "A message submitted through the contact form.",
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "email": {
          "type": "string",
          "format": "email"
        },
        "role": {
          "type": "string",
          "enum": [
            "Seeker",
            "Guide",
            "Host",
            "Vendor",
            "Other"
          ]
        },
        "message": {
          "type": "string"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        },
        "userId": {
          "type": "string"
        },
        "pageContext": {
          "type": "string"
        }
      },
      "required": [
        "name",
        "email",
        "message",
        "createdAt"
      ]
    },
    "Conversation": {
      "title": "Conversation",
      "description": "A conversation thread between two or more users.",
      "type": "object",
      "properties": {
        "participants": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Array of user UIDs participating in the conversation."
        },
        "participantInfo": {
          "type": "object",
          "additionalProperties": {
            "type": "object",
            "properties": {
              "displayName": {
                "type": "string"
              },
              "avatarUrl": {
                "type": "string",
                "format": "uri"
              }
            }
          }
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        },
        "lastMessageAt": {
          "type": "string",
          "format": "date-time"
        },
        "lastMessageSnippet": {
          "type": "string"
        }
      },
      "required": [
        "participants",
        "createdAt",
        "lastMessageAt"
      ]
    },
    "Message": {
      "title": "Message",
      "description": "A single message within a conversation.",
      "type": "object",
      "properties": {
        "senderId": {
          "type": "string"
        },
        "text": {
          "type": "string"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": [
        "senderId",
        "text",
        "createdAt"
      ]
    },
    "Manifestation": {
      "title": "Manifestation",
      "description": "A user's dream retreat request to be matched with providers.",
      "type": "object",
      "properties": {
        "guidingPreference": {
          "type": "string",
          "description": "Indicates if the seeker needs a guide ('match_guide') or is the guide themselves."
        },
        "seeker_id": {
          "type": "string"
        },
        "created_at": {
          "type": "string",
          "format": "date-time"
        },
        "updated_at": {
          "type": "string",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "enum": [
            "draft",
            "submitted",
            "matching",
            "proposals_open",
            "assembling",
            "booked",
            "completed",
            "closed"
          ]
        },
        "destination": {
          "type": "object",
          "properties": {
            "country": {
              "type": "string"
            },
            "region": {
              "type": "string"
            },
            "city": {
              "type": "string"
            }
          }
        },
        "date_pref": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "exact_range",
                "flexible"
              ]
            },
            "start_date": {
              "type": "string",
              "format": "date-time"
            },
            "end_date": {
              "type": "string",
              "format": "date-time"
            },
            "month": {
              "type": "string"
            },
            "season": {
              "type": "string"
            }
          }
        },
        "group_size": {
          "type": "number"
        },
        "retreat_types": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "must_haves": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "nice_to_haves": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "lodging_preference": {
          "type": "string"
        },
        "luxury_tier": {
          "type": "string",
          "enum": [
            "Essentials",
            "Elevated",
            "Luxury",
            "Ultra-Luxury"
          ]
        },
        "budget_range": {
          "type": "string"
        },
        "dietary_preference": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "notes_text": {
          "type": "string"
        },
        "credit_policy": {
          "type": "object",
          "properties": {
            "percent": {
              "type": "number"
            },
            "cap_amount": {
              "type": "number"
            },
            "currency": {
              "type": "string"
            },
            "validity_days": {
              "type": "number"
            },
            "trigger": {
              "type": "string"
            }
          }
        },
        "matched_summary_counts": {
          "type": "object",
          "properties": {
            "hosts": {
              "type": "number"
            },
            "guides": {
              "type": "number"
            },
            "vendors": {
              "type": "number"
            }
          }
        },
        "shortlist": {
          "type": "object",
          "properties": {
            "hosts": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "guides": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "vendors": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        },
        "last_notified_at": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": [
        "seeker_id",
        "created_at",
        "status",
        "group_size",
        "luxury_tier",
        "notes_text"
      ]
    },
    "Proposal": {
      "title": "Proposal",
      "description": "A provider's proposal in response to a Manifestation.",
      "type": "object",
      "properties": {
        "manifestation_id": {
          "type": "string"
        },
        "provider_id": {
          "type": "string"
        },
        "role": {
          "type": "string",
          "enum": [
            "host",
            "guide",
            "vendor"
          ]
        },
        "services_committed": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "availability_confirmed": {
          "type": "boolean"
        },
        "price_range": {
          "type": "object",
          "properties": {
            "min": {
              "type": "number"
            },
            "max": {
              "type": "number"
            },
            "currency": {
              "type": "string"
            }
          }
        },
        "message": {
          "type": "string"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "enum": [
            "submitted",
            "withdrawn",
            "accepted",
            "declined"
          ]
        }
      },
      "required": [
        "manifestation_id",
        "provider_id",
        "role",
        "availability_confirmed",
        "message",
        "createdAt",
        "status"
      ]
    },
    "Match": {
      "title": "Match",
      "description": "A potential match between a Manifestation and a Provider.",
      "type": "object",
      "properties": {
        "manifestation_id": {
          "type": "string"
        },
        "provider_id": {
          "type": "string"
        },
        "role": {
          "type": "string",
          "enum": [
            "host",
            "guide",
            "vendor"
          ]
        },
        "match_score": {
          "type": "number"
        },
        "notified": {
          "type": "boolean"
        },
        "notification_wave": {
          "type": "number"
        },
        "matched_at": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": [
        "manifestation_id",
        "provider_id",
        "role",
        "match_score",
        "matched_at"
      ]
    },
    "Notification": {
      "title": "Notification",
      "description": "An in-app notification for a user.",
      "type": "object",
      "properties": {
        "userId": {
          "type": "string"
        },
        "title": {
          "type": "string"
        },
        "body": {
          "type": "string"
        },
        "link": {
          "type": "string"
        },
        "read": {
          "type": "boolean"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": [
        "userId",
        "title",
        "body",
        "read",
        "createdAt"
      ]
    },
    "ManifestCredit": {
      "title": "Manifest Credit",
      "description": "A credit earned by a Seeker for a completed Manifestation.",
      "type": "object",
      "properties": {
        "seeker_id": {
          "type": "string"
        },
        "manifestation_id": {
          "type": "string"
        },
        "issued_amount": {
          "type": "number"
        },
        "currency": {
          "type": "string"
        },
        "issue_date": {
          "type": "string",
          "format": "date-time"
        },
        "expiry_date": {
          "type": "string",
          "format": "date-time"
        },
        "redeemed_amount": {
          "type": "number"
        },
        "redemption_booking_id": {
          "type": "string"
        },
        "redeemed_date": {
          "type": "string",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "enum": [
            "available",
            "redeemed",
            "expired"
          ]
        }
      },
      "required": [
        "seeker_id",
        "manifestation_id",
        "issued_amount",
        "issue_date",
        "expiry_date",
        "status"
      ]
    },
    "FounderCode": {
      "title": "Founder Code",
      "description": "A unique access pass code for founding members.",
      "type": "object",
      "properties": {
        "roleBucket": {
          "type": "string",
          "enum": [
            "guide",
            "vendor",
            "host"
          ]
        },
        "status": {
          "type": "string",
          "enum": [
            "available",
            "claimed"
          ]
        },
        "claimedBy": {
          "type": "string",
          "format": "email"
        },
        "claimedAt": {
          "type": "string",
          "format": "date-time"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": [
        "roleBucket",
        "status",
        "createdAt"
      ]
    },
    "FounderQuota": {
      "title": "Founder Quota",
      "description": "Tracks the number of founder codes assigned per role.",
      "type": "object",
      "properties": {
        "guideCount": {
          "type": "number"
        },
        "vendorCount": {
          "type": "number"
        },
        "hostCount": {
          "type": "number"
        }
      },
      "required": [
        "guideCount",
        "vendorCount",
        "hostCount"
      ]
    }
  },
  "auth": {
    "providers": [
      "google.com",
      "password"
    ]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": {
        "$ref": "#/entities/User"
      },
      "description": "User profile information."
    },
    "/waitlist_seekers/{seekerId}": {
      "schema": {
        "$ref": "#/entities/WaitlistSeeker"
      },
      "description": "Collection of users who have signed up for the waitlist."
    },
    "/waitlist/{email}": {
      "schema": {
        "$ref": "#/entities/WaitlistSubmission"
      },
      "description": "General waitlist submissions, with email as document ID."
    },
    "/contact_submissions/{submissionId}": {
      "schema": {
        "$ref": "#/entities/ContactSubmission"
      },
      "description": "Collection of contact form submissions."
    },
    "/conversations/{conversationId}": {
      "schema": {
        "$ref": "#/entities/Conversation"
      },
      "description": "Conversation threads between users."
    },
    "/conversations/{conversationId}/messages/{messageId}": {
      "schema": {
        "$ref": "#/entities/Message"
      },
      "description": "Messages within a conversation."
    },
    "/manifestations/{manifestationId}": {
      "schema": {
        "$ref": "#/entities/Manifestation"
      },
      "description": "Collection of user-submitted retreat manifestations."
    },
    "/matches/{matchId}": {
      "schema": {
        "$ref": "#/entities/Match"
      },
      "description": "Potential matches between manifestations and providers."
    },
    "/proposals/{proposalId}": {
      "schema": {
        "$ref": "#/entities/Proposal"
      },
      "description": "Provider proposals for manifestations."
    },
    "/bookings/{bookingId}": {
      "schema": {
        "$ref": "#/entities/Booking"
      },
      "description": "Confirmed and paid bookings."
    },
    "/notifications/{notificationId}": {
      "schema": {
        "$ref": "#/entities/Notification"
      },
      "description": "In-app notifications for users."
    },
    "/manifest_credits/{creditId}": {
      "schema": {
        "$ref": "#/entities/ManifestCredit"
      },
      "description": "A user's earned credits from manifestations."
    },
    "/founder_codes/{codeId}": {
      "schema": {
        "$ref": "#/entities/FounderCode"
      },
      "description": "Collection of unique founder access codes."
    },
    "/counters/founder_quota": {
      "schema": {
        "$ref": "#/entities/FounderQuota"
      },
      "description": "Singleton document to track founder code capacity."
    }
  }
}
